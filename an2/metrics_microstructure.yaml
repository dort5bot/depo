# schemas/metrics_microstructure.yaml
meta:
  version: "2025.1"
  maintainer: "ysf-bot-framework"
  last_updated: "2025-10-28"
  description: "Meta registry for market microstructure and order flow metrics."

metrics:

  OFI:
    category: "order_flow"
    description: "Order Flow Imbalance measures aggressiveness of limit order updates."
    formula: "OFI = ΔBidSize - ΔAskSize (adjusted by price movement)"
    input: "orderbook_series"
    output: "float_series"

  CVD:
    category: "flow_dynamics"
    description: "Cumulative Volume Delta — sum of (buy - sell) volumes over time."
    formula: "CVD_t = Σ(Buy_t - Sell_t)"
    input: "trade_volume_pair"
    output: "float_series"

  Microprice_Deviation:
    category: "microprice"
    description: "Difference between microprice and midprice, reflects orderbook bias."
    formula: "MicroDev = ((P_ask*V_bid + P_bid*V_ask)/(V_bid+V_ask)) - Midprice"
    input: "orderbook_top"
    output: "float_series"

  Market_Impact:
    category: "impact"
    description: "Correlation between absolute price change and trade volume."
    formula: "Impact = corr(|ΔP|, Volume, window)"
    parameters:
      - name: window
        type: int
        default: 20
    input: "price_volume_series"
    output: "float_series"

  Depth_Elasticity:
    category: "liquidity_depth"
    description: "Elasticity of orderbook depth relative to price change."
    formula: "E = (%ΔVolume) / (%ΔPrice)"
    parameters:
      - name: window
        type: int
        default: 10
    input: "orderbook_depth_series"
    output: "float_series"

  Taker_Dominance_Ratio:
    category: "taker_activity"
    description: "Ratio of taker buy to taker sell volume."
    formula: "TDR = TakerBuy / TakerSell"
    input: "taker_volume_pair"
    output: "float_series"

  Liquidity_Density:
    category: "liquidity_distribution"
    description: "Average liquidity per price tick interval."
    formula: "LD = mean(Volume[-N:]) / N"
    parameters:
      - name: tick_range
        type: int
        default: 10
    input: "orderbook_depth"
    output: "float_value"
