# ============================================================
# analysis/schemas/handler_registry.yaml
# HANDLER REGISTRY - module_registry.yaml ile TAM UYUMLU
# ============================================================

meta:
  version: "2025.1"
  description: "Unified Command Handler Configuration"
  default_handler: "command_router_handler"
  score_standard: [-1, 1]

commands:

  /t:
    description: "Genel piyasa görünümü veya tek coin analizi"
    handler: "command_router_handler"
    modes:
      default:
        scenario: "Genel görünüm (çoklu coin)"
        modules: ["trend_analyzer", "volatility_analyzer", "risk_analyzer", "sentiment_analyzer"]
        composite: "core_composite"
      single:
        scenario: "Tek coin detaylı analiz"
        modules: ["trend_analyzer", "momentum_analyzer", "volatility_analyzer", "sentiment_plus_analyzer", "microstructure_analyzer", "onchain_analyzer"]
        composite: "comprehensive_composite"

  /tb:
    description: "Top alım fırsatları (Buy Opportunity Scan)"
    handler: "command_router_handler"
    modes:
      default:
        scenario: "Top scan"
        modules: ["trend_analyzer", "volatility_analyzer", "sentiment_plus_analyzer", "risk_analyzer"]
        composite: "core_composite"

  /tm:
    description: "Market Health - piyasa sağlığı göstergeleri"
    handler: "command_router_handler"
    modes:
      default:
        scenario: "Genel market health görünümü"
        modules: ["market_scan_analyzer", "risk_analyzer", "sentiment_analyzer"]
        composite: "core_composite"

  /tf:
    description: "Capital Flow - sermaye giriş çıkışı"
    handler: "command_router_handler"
    modes:
      default:
        scenario: "Capital Flow analizi"
        modules: ["onchain_analyzer", "microstructure_analyzer", "futures_market_analyzer"]
        composite: "comprehensive_composite"

  /ta:
    description: "Anomaly / Alert Map - piyasa anomalileri"
    handler: "command_router_handler"
    modes:
      default:
        scenario: "Anomaly / Alert Map"
        modules: ["volatility_analyzer", "sentiment_plus_analyzer", "risk_analyzer"]
        composite: "trade_composite"

composite_metrics:
  core_composite:
    score_range: [-1, 1]
    description: "Piyasa yönü, volatilite ve duyarlılığa dayalı genel skor"

  comprehensive_composite:
    score_range: [-1, 1]
    description: "Tek coin kapsamlı analiz skorları"

  trade_composite:
    score_range: [-1, 1]
    description: "Al-Tut-Sat tavsiyesi üreten nihai kompozit skor"

  confidence_composite:
    score_range: [0, 1]
    description: "Model güvenilirlik ve veri tutarlılığı skorlaması"